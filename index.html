<!DOCTYPE html>
<html lang="pl">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Mapa Geografii Polski - Kartkówka</title>
    <link rel="stylesheet" href="https://unpkg.com/leaflet@1.9.4/dist/leaflet.css" />
    <link rel="stylesheet" href="style.css">
</head>
<body>
    <div class="app-container">
        <!-- Header -->
        <header class="header">
            <h1>Mapa Geografii Polski</h1>
            <div class="mode-switch" hidden>
                <label class="switch">
                    <input type="checkbox" id="modeToggle">
                    <span class="slider"></span>
                </label>
                <span id="modeLabel">Tryb nauki</span>
            </div>
        </header>

        <!-- Main content -->
        <div class="main-content">
            <!-- Side panel -->
            <aside class="side-panel">
                <div class="panel-section">
                    <h3>Warstwy geograficzne</h3>
                    <div class="layer-controls">
                        <button class="btn btn--secondary btn--sm" id="showAllBtn">Pokaż wszystkie</button>
                        <button class="btn btn--outline btn--sm" id="hideAllBtn">Ukryj wszystkie</button>
                    </div>
                    <div class="layer-buttons" id="layerButtons">
                        <!-- Layer buttons will be generated by JavaScript -->
                    </div>
                </div>

                <div class="panel-section" hidden>
                    <h3>Quiz</h3>
                    <button class="btn btn--primary btn--full-width" id="randomQuizBtn">Losuj quiz</button>
                    <div class="stats" id="stats">
                        <div class="stat-item">
                            <span class="stat-label">Poprawne:</span>
                            <span class="stat-value" id="correctCount">0</span>
                        </div>
                        <div class="stat-item">
                            <span class="stat-label">Niepoprawne:</span>
                            <span class="stat-value" id="incorrectCount">0</span>
                        </div>
                        <div class="stat-item">
                            <span class="stat-label">Skuteczność:</span>
                            <span class="stat-value" id="accuracy">0%</span>
                        </div>
                    </div>
                    <button class="btn btn--outline btn--sm btn--full-width" id="resetStatsBtn">Resetuj statystyki</button>
                </div>

                <div class="panel-section">
                    <details class="instructions">
                        <summary>Instrukcja obsługi</summary>
                        <div class="instructions-content">
                            <p><strong>Tryb nauki:</strong> Kliknij na punkt, aby zobaczyć jego nazwę i opis.</p>
                            <p><strong>Tryb quiz:</strong> Kliknij na punkt i wpisz jego nazwę.</p>
                            <p><strong>Warstwy:</strong> Włączaj/wyłączaj kategorie obiektów przyciskami po lewej.</p>
                            <p><strong>Nawigacja:</strong> Przybliżaj mapę kółkiem myszy lub przyciskami +/-.</p>
                        </div>
                    </details>
                </div>
            </aside>

            <!-- Map container -->
            <main class="map-container">
                <div id="map" class="map"></div>
                
                <!-- Quiz modal -->
                <div class="modal hidden" id="quizModal">
                    <div class="modal-content">
                        <h3 id="quizTitle">Jak nazywa się ten obiekt?</h3>
                        <p id="quizCategory"></p>
                        <div class="form-group">
                            <input type="text" class="form-control" id="quizInput" placeholder="Wpisz nazwę...">
                        </div>
                        <div class="modal-buttons">
                            <button class="btn btn--primary" id="submitAnswer">Sprawdź</button>
                            <button class="btn btn--outline" id="cancelQuiz">Anuluj</button>
                        </div>
                        <div class="quiz-result hidden" id="quizResult">
                            <p id="resultMessage"></p>
                            <p id="correctAnswer"></p>
                        </div>
                    </div>
                </div>

                <!-- Info popup -->
                <div class="info-popup hidden" id="infoPopup">
                    <div class="popup-content">
                        <button class="close-btn" id="closePopup">&times;</button>
                        <h4 id="popupTitle"></h4>
                        <p id="popupCategory"></p>
                        <p id="popupDescription"></p>
                    </div>
                </div>
            </main>
        </div>
    </div>

    <script src="https://unpkg.com/leaflet@1.9.4/dist/leaflet.js"></script>
    <script src="app.js"></script>
</body>
</html>